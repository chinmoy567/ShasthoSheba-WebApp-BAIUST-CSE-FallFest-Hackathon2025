<!DOCTYPE html>
<html lang="en">
  <%- include("../partials/head", { title: "ржоржирзЛржмржирзНржзрзБ - ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп ржЪрзЗржХ-ржЗржи" }) %>
  <body class="bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 min-h-screen text-gray-100">
    <%- include("../partials/navbar") %>

    <div class="max-w-3xl mx-auto mt-10 p-6 bg-blue-800/50 backdrop-blur-sm rounded-2xl card-shadow border border-blue-600/30">
      <h2 class="text-2xl font-bold text-yellow-400 mb-4">ЁЯза ржЭрзЗрзЬрзЗ ржпрж╛ржи ржЖржкржирж╛рж░ ржоржирзЗрж░ ржЕржмрж╕рзНржерж╛</h2>

      <!-- Check if last entry was more than 3 days ago -->
      <% if (checkins.length > 0) { %>
        <% 
          const lastCheckin = checkins[0];
          const daysDiff = Math.floor((new Date() - new Date(lastCheckin.date)) / (1000 * 60 * 60 * 24));
        %>
        <% if (daysDiff > 3) { %>
          <div class="bg-yellow-500/20 border border-yellow-500/50 rounded-xl p-4 mb-4">
            <p class="text-yellow-300 text-center">
              рждрж┐ржиржжрж┐ржирзЗржУ ржЖржкржирж╛рж░ ржжрзЗржЦрж╛ ржирж╛ ржкрзЗрзЯрзЗ ржЖржорж╛ржжрзЗрж░ржЗ ржоржи ржЦрж╛рж░рж╛ржк рж╣рзЯрзЗ ржЧрзЗрж▓ ЁЯШн ржЬрж▓ржжрж┐ ржПрж╕рзЗ ржоржирзЗрж░ ржЦржмрж░рж╛ржЦржмрж░ ржжрж┐рзЯрзЗ ржпрж╛ржи
            </p>
          </div>
        <% } %>
      <% } %>

      <a
        href="/dashboard/checkin/new"
        class="inline-flex items-center gap-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-gray-900 px-6 py-3 rounded-xl font-bold hover:from-yellow-400 hover:to-yellow-500 transition transform hover:scale-105 card-shadow border border-yellow-400"
      >
        + ржПржЦрж╛ржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзЗ ржЬрж╛ржирж╛ржи
      </a>

      <ul class="mt-6 space-y-3">
        <% if (checkins.length === 0) { %>
          <p class="text-blue-200 mt-4">ржПржЦржиржУ ржХрзЛржирзЛ рждржерзНржп ржирзЗржЗред</p>
        <% } else { %>
          <% checkins.forEach(c => { %>
            <li class="p-4 border border-blue-600/30 rounded-xl bg-blue-800/30 backdrop-blur-sm card-shadow">
              <p class="text-lg text-yellow-400"><%= c.mood %></p>
              <p class="text-blue-200"><%= c.note || "" %></p>
              <p class="text-sm text-blue-300"><%= c.date.toDateString() %></p>
            </li>
          <% }) %>
        <% } %>
      </ul>
    </div>

    <footer class="mt-10 py-6 text-center text-blue-300 border-t border-blue-700/30">
      <p>┬й 2025 ржоржирзЛржмржирзНржзрзБ | рж╕ржмрж╛рж░ ржЬржирзНржп рж╕рзНржмрж╛рж╕рзНржерзНржпрж╕рзЗржмрж╛</p>
    </footer>

    <style>
      .card-shadow { 
        box-shadow: 0 12px 30px rgba(14, 12, 26, 0.5); 
      }
    </style>
  </body>
</html>
